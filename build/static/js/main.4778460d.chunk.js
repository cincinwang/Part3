(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(6),o=t(3),s=t(0),a=t(15),r=t.n(a),u=t(2),i=t(4),d=t.n(i),l="/api/persons",j=function(){return d.a.get(l)},f=function(e){return d.a.post(l,e)},b=function(e,n){return d.a.put("".concat(l,"/").concat(e),n)},h=function(e){return d.a.delete("".concat(l,"/").concat(e))},m=(t(39),function(e){var n=e.message;return""===n.content?null:Object(s.jsx)("div",{className:n.success?"success":"fail",children:n.content})}),O=function(e){var n=e.persons,t=e.showPerson,c=n.map((function(e){return e.name})),o=c.filter((function(e){return e.toUpperCase()===t.toUpperCase()})),a=c.indexOf(o.toString());return Object(s.jsx)("div",{children:o.map((function(e){return Object(s.jsxs)("li",{children:[e," ",n[a].number]})}))})},p=function(e){var n=e.person,t=e.handleDelete;return Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsxs)("li",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return t(e.name,e.id)},children:"delete"})]},e.id)}))})},v=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],r=Object(u.useState)(""),i=Object(o.a)(r,2),d=i[0],l=i[1],v=Object(u.useState)(""),x=Object(o.a)(v,2),g=x[0],w=x[1],S=Object(u.useState)(""),y=Object(o.a)(S,2),k=y[0],C=y[1],T=Object(u.useState)({content:"",success:null}),D=Object(o.a)(T,2),P=D[0],A=D[1];Object(u.useEffect)((function(){j("http://localhost:3001/persons").then((function(e){a(e.data)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phone Book"}),Object(s.jsx)(m,{message:P}),Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{value:k,onChange:function(e){C(e.target.value)}})]}),Object(s.jsx)(O,{persons:t,showPerson:k}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:d,number:g};if(t.find((function(e){return e.name===d}))){var o=t.find((function(e){return e.name===n.name})),s=Object(c.a)(Object(c.a)({},o),{},{number:g});window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one? "))&&b(o.id,s).then((function(e){a(t.map((function(n){return n.id!==o.id?n:e.data}))),l(""),w(""),A({content:"".concat(o.name,"'s number is updated"),success:!0}),setTimeout((function(){A({content:"",success:null})}),4e3),console.log(e.data),console.log(t)})).catch((function(e){A({content:"Information of ".concat(o.name," has already been removed from the server"),success:!1}),setTimeout((function(){A({content:"",success:null})}),5e3)}))}else f(n).then((function(e){a(t.concat(e.data)),l(""),w(""),A({content:"Added ".concat(n.name),success:!0}),setTimeout((function(){A({content:"",success:null})}),5e3)})).catch((function(e){A({content:"Sorry, this person cannot be added",success:!1})})),setTimeout((function(){A({content:"",success:null})}),5e3)},children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:d,onChange:function(e){t.map((function(e){return e.name})).includes(e.target.value)&&window.alert(e.target.value+"is already added to phonebook!"),l(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number:",Object(s.jsx)("input",{value:g,onChange:function(e){w(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(p,{person:t,handleDelete:function(e,n){var c=t.find((function(e){return e.id===n}));window.confirm("delete ".concat(e))&&h(c.id).then((function(e){a(t.filter((function(e){return e.id!==n})))})).catch((function(e){A("".concat(c.name," has already been removed from the server"),!1),setTimeout((function(){A(null)}),5e3)}))}})]})};r.a.render(Object(s.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4778460d.chunk.js.map